Module after desugaring:
module Bug1997
Declarations: [
let op_Equals_Hat a b = a + b
let test1 a b c = a =^ b =^ c
let test2 a b c = a =^ b =^ c
let test3 a b c = a =^ (b =^ c)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.test1 == Bug1997.test2)

let imp_assoc_0 p q r = p ==> q ==> r
let imp_assoc_1 p q r = p ==> q ==> r
let imp_assoc_2 p q r = (p ==> q) ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_assoc_0 == Bug1997.imp_assoc_1)

let imp_iff_0 p q r = p ==> q <==> r
let imp_iff_1 p q r = p ==> q <==> r
let imp_iff_2 p q r = p ==> (q <==> r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_iff_0 == Bug1997.imp_iff_1)

let imp_conj_1 p q r s = p ==> q /\ r ==> s
let imp_conj_2 p q r s = (p ==> q) /\ (r ==> s)
let imp_conj_3 p q r s = p ==> q /\ (r ==> s)
let imp_conj_4 p q r s = p ==> q /\ r ==> s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_conj_1 == Bug1997.imp_conj_4)





let impneg1 p q r = p ==> q /\ ~p ==> r
let impneg2 p q r = (p ==> q) /\ (~p ==> r)
let impneg3 p q r = p ==> q /\ (~p ==> r)
let impneg4 p q r = p ==> q /\ ~p ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.impneg1 == Bug1997.impneg4)





let cd1 p q r = p /\ q \/ r
let cd2 p q r = p /\ q \/ r
let cd3 p q r = p /\ (q \/ r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.cd1 == Bug1997.cd2)


let m0 p q r s = p /\ (q \/ r) /\ s
let m1 p q r s = p /\ q \/ r /\ s
let m2 p q r s = p /\ q \/ r /\ s
let m3 p q r s = p /\ q \/ r /\ s
let m4 p q r s = p /\ q \/ r /\ s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m2)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m3)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m4)




let n0 p q r s = p \/ q /\ r \/ s
let n1 p q r s = p \/ q /\ r \/ s
let n2 p q r s = (p \/ q) /\ r \/ s
let n3 p q r s = (p \/ q) /\ (r \/ s)
let n4 p q r s = p \/ q /\ (r \/ s)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.n0 == Bug1997.n1)






]

Module before type checking:
module Bug1997
Declarations: [
let op_Equals_Hat a b = a + b
let test1 a b c = a =^ b =^ c
let test2 a b c = a =^ b =^ c
let test3 a b c = a =^ (b =^ c)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.test1 == Bug1997.test2)

let imp_assoc_0 p q r = p ==> q ==> r
let imp_assoc_1 p q r = p ==> q ==> r
let imp_assoc_2 p q r = (p ==> q) ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_assoc_0 == Bug1997.imp_assoc_1)

let imp_iff_0 p q r = p ==> q <==> r
let imp_iff_1 p q r = p ==> q <==> r
let imp_iff_2 p q r = p ==> (q <==> r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_iff_0 == Bug1997.imp_iff_1)

let imp_conj_1 p q r s = p ==> q /\ r ==> s
let imp_conj_2 p q r s = (p ==> q) /\ (r ==> s)
let imp_conj_3 p q r s = p ==> q /\ (r ==> s)
let imp_conj_4 p q r s = p ==> q /\ r ==> s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_conj_1 == Bug1997.imp_conj_4)





let impneg1 p q r = p ==> q /\ ~p ==> r
let impneg2 p q r = (p ==> q) /\ (~p ==> r)
let impneg3 p q r = p ==> q /\ (~p ==> r)
let impneg4 p q r = p ==> q /\ ~p ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.impneg1 == Bug1997.impneg4)





let cd1 p q r = p /\ q \/ r
let cd2 p q r = p /\ q \/ r
let cd3 p q r = p /\ (q \/ r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.cd1 == Bug1997.cd2)


let m0 p q r s = p /\ (q \/ r) /\ s
let m1 p q r s = p /\ q \/ r /\ s
let m2 p q r s = p /\ q \/ r /\ s
let m3 p q r s = p /\ q \/ r /\ s
let m4 p q r s = p /\ q \/ r /\ s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m2)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m3)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m4)




let n0 p q r s = p \/ q /\ r \/ s
let n1 p q r s = p \/ q /\ r \/ s
let n2 p q r s = (p \/ q) /\ r \/ s
let n3 p q r s = (p \/ q) /\ (r \/ s)
let n4 p q r s = p \/ q /\ (r \/ s)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.n0 == Bug1997.n1)






]

{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":13,"col":40},"end_pos":{"line":13,"col":56}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":13,"col":28},"end_pos":{"line":13,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___1`","While typechecking the top-level declaration `[@@expect_failure] let uu___1`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":21,"col":40},"end_pos":{"line":21,"col":68}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":21,"col":28},"end_pos":{"line":21,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___2`","While typechecking the top-level declaration `[@@expect_failure] let uu___2`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":29,"col":40},"end_pos":{"line":29,"col":64}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":29,"col":28},"end_pos":{"line":29,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___3`","While typechecking the top-level declaration `[@@expect_failure] let uu___3`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":38,"col":40},"end_pos":{"line":38,"col":66}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":38,"col":28},"end_pos":{"line":38,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___4`","While typechecking the top-level declaration `[@@expect_failure] let uu___4`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":39,"col":40},"end_pos":{"line":39,"col":66}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":39,"col":28},"end_pos":{"line":39,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___4`","While typechecking the top-level declaration `[@@expect_failure] let uu___4`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":40,"col":40},"end_pos":{"line":40,"col":66}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":40,"col":28},"end_pos":{"line":40,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___4`","While typechecking the top-level declaration `[@@expect_failure] let uu___4`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":41,"col":40},"end_pos":{"line":41,"col":66}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":41,"col":28},"end_pos":{"line":41,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___4`","While typechecking the top-level declaration `[@@expect_failure] let uu___4`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":42,"col":40},"end_pos":{"line":42,"col":66}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":42,"col":28},"end_pos":{"line":42,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___4`","While typechecking the top-level declaration `[@@expect_failure] let uu___4`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":51,"col":40},"end_pos":{"line":51,"col":60}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":51,"col":28},"end_pos":{"line":51,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___5`","While typechecking the top-level declaration `[@@expect_failure] let uu___5`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":52,"col":40},"end_pos":{"line":52,"col":60}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":52,"col":28},"end_pos":{"line":52,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___5`","While typechecking the top-level declaration `[@@expect_failure] let uu___5`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":53,"col":40},"end_pos":{"line":53,"col":60}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":53,"col":28},"end_pos":{"line":53,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___5`","While typechecking the top-level declaration `[@@expect_failure] let uu___5`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":54,"col":40},"end_pos":{"line":54,"col":60}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":54,"col":28},"end_pos":{"line":54,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___5`","While typechecking the top-level declaration `[@@expect_failure] let uu___5`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":55,"col":40},"end_pos":{"line":55,"col":60}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":55,"col":28},"end_pos":{"line":55,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___5`","While typechecking the top-level declaration `[@@expect_failure] let uu___5`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":63,"col":40},"end_pos":{"line":63,"col":52}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":63,"col":28},"end_pos":{"line":63,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___6`","While typechecking the top-level declaration `[@@expect_failure] let uu___6`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":64,"col":40},"end_pos":{"line":64,"col":52}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":64,"col":28},"end_pos":{"line":64,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___6`","While typechecking the top-level declaration `[@@expect_failure] let uu___6`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":75,"col":40},"end_pos":{"line":75,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":75,"col":28},"end_pos":{"line":75,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___9`","While typechecking the top-level declaration `[@@expect_failure] let uu___9`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":76,"col":40},"end_pos":{"line":76,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":76,"col":28},"end_pos":{"line":76,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___9`","While typechecking the top-level declaration `[@@expect_failure] let uu___9`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":77,"col":40},"end_pos":{"line":77,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":77,"col":28},"end_pos":{"line":77,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___9`","While typechecking the top-level declaration `[@@expect_failure] let uu___9`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":78,"col":40},"end_pos":{"line":78,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":78,"col":28},"end_pos":{"line":78,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___9`","While typechecking the top-level declaration `[@@expect_failure] let uu___9`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":87,"col":40},"end_pos":{"line":87,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":87,"col":28},"end_pos":{"line":87,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":88,"col":40},"end_pos":{"line":88,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":88,"col":28},"end_pos":{"line":88,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":89,"col":40},"end_pos":{"line":89,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":89,"col":28},"end_pos":{"line":89,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":90,"col":40},"end_pos":{"line":90,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":90,"col":28},"end_pos":{"line":90,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":91,"col":40},"end_pos":{"line":91,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":91,"col":28},"end_pos":{"line":91,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
{"msg":["Expected failure:","Assertion failed","The SMT solver could not prove the query. Use --query_stats for more details."],"level":"Info","range":{"def":{"file_name":"Bug1997.fst","start_pos":{"line":92,"col":40},"end_pos":{"line":92,"col":50}},"use":{"file_name":"Bug1997.fst","start_pos":{"line":92,"col":28},"end_pos":{"line":92,"col":39}}},"number":19,"ctx":["While checking for top-level effects","While typechecking the top-level declaration `let uu___10`","While typechecking the top-level declaration `[@@expect_failure] let uu___10`"]}
Module after type checking:
module Bug1997
Declarations: [
let op_Equals_Hat a b = a + b
let test1 a b c = a =^ b =^ c
let test2 a b c = a =^ b =^ c
let test3 a b c = a =^ (b =^ c)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.test1 == Bug1997.test2)
let imp_assoc_0 p q r = p ==> q ==> r
let imp_assoc_1 p q r = p ==> q ==> r
let imp_assoc_2 p q r = (p ==> q) ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_assoc_0 == Bug1997.imp_assoc_1)
let imp_iff_0 p q r = p ==> q <==> r
let imp_iff_1 p q r = p ==> q <==> r
let imp_iff_2 p q r = p ==> (q <==> r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_iff_0 == Bug1997.imp_iff_1)
let imp_conj_1 p q r s = p ==> q /\ r ==> s
let imp_conj_2 p q r s = (p ==> q) /\ (r ==> s)
let imp_conj_3 p q r s = p ==> q /\ (r ==> s)
let imp_conj_4 p q r s = p ==> q /\ r ==> s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.imp_conj_1 == Bug1997.imp_conj_4)
let impneg1 p q r = p ==> q /\ ~p ==> r
let impneg2 p q r = (p ==> q) /\ (~p ==> r)
let impneg3 p q r = p ==> q /\ (~p ==> r)
let impneg4 p q r = p ==> q /\ ~p ==> r
private
let _ = FStar.Pervasives.assert_norm (Bug1997.impneg1 == Bug1997.impneg4)
let cd1 p q r = p /\ q \/ r
let cd2 p q r = p /\ q \/ r
let cd3 p q r = p /\ (q \/ r)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.cd1 == Bug1997.cd2)
let m0 p q r s = p /\ (q \/ r) /\ s
let m1 p q r s = p /\ q \/ r /\ s
let m2 p q r s = p /\ q \/ r /\ s
let m3 p q r s = p /\ q \/ r /\ s
let m4 p q r s = p /\ q \/ r /\ s
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m2)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m3)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.m1 == Bug1997.m4)
let n0 p q r s = p \/ q /\ r \/ s
let n1 p q r s = p \/ q /\ r \/ s
let n2 p q r s = (p \/ q) /\ r \/ s
let n3 p q r s = (p \/ q) /\ (r \/ s)
let n4 p q r s = p \/ q /\ (r \/ s)
private
let _ = FStar.Pervasives.assert_norm (Bug1997.n0 == Bug1997.n1)
]

