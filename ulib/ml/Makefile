.PHONY: intfiles

all: intfiles

INTFILES_RAW=\
	FStar_Int8.ml		\
	FStar_Int16.ml		\
	FStar_Int32.ml		\
	FStar_Int64.ml		\
	FStar_UInt16.ml		\
	FStar_UInt32.ml		\
	FStar_UInt64.ml

FSTAR_HOME ?= $(realpath ../..)
DUNE_SNAPSHOT ?= $(FSTAR_HOME)/ocaml

TARGET_DIR=$(DUNE_SNAPSHOT)/fstar-lib/generated/
INTFILES=$(addprefix $(TARGET_DIR),$(INTFILES_RAW))

intfiles: $(INTFILES)

$(TARGET_DIR)%.ml: %.ml.prefix FStar_Ints.ml.body
	>$@
	@echo '(* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! *)' >> $@
	@echo '(* THIS IS AN AUTOGENERATED FILE! See ulib/ml/Makefile *)' >> $@
	@echo '(* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! *)' >> $@
	@echo '' >> $@
	@cat $< FStar_Ints.ml.body >> $@
